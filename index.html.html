<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BharatVoteInsight - Indian Political Awareness Platform</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        /* Layout Switcher */
        .layout-switcher {
            background: white;
            padding: 0.8rem 1rem;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .layout-btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 500;
        }

        .layout-btn.active {
            background: #138808;
            color: white;
            border-color: #138808;
        }

        .layout-label {
            font-weight: 600;
            margin-right: 0.5rem;
            color: #666;
        }

        /* Common Header Styles */
        header {
            background: linear-gradient(135deg, #ff9933 0%, #ffffff 50%, #138808 100%);
            color: #333;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-bottom: 2px solid #333;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }

        .logo-tagline {
            font-size: 0.9rem;
            color: #666;
        }

        .user-tokens {
            background: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .token-icon {
            color: #FFD700;
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
            flex-wrap: wrap;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: #138808;
        }

        /* Hide all layouts by default */
        .layout-content {
            display: none;
        }

        .layout-content.active {
            display: block;
        }

        /* Common Map Styles */
        .map-container {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: 600px;
        }

        .info-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: 600px;
            overflow-y: auto;
        }

        .location-info {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #138808;
        }

        /* LAYOUT 1: Reviews Focus */
        .layout-reviews .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .review-form {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .review-form textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            resize: vertical;
        }

        .review-form button {
            background: #138808;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .user-review {
            padding: 0.8rem;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }

        .review-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 0.3rem;
            font-size: 0.8rem;
            color: #888;
        }

        /* LAYOUT 2: Agendas & Accuracy Focus */
        .layout-agendas .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .party-agendas {
            margin-top: 1.5rem;
        }

        .agenda-year-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .year-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .year-btn.active {
            background: #138808;
            color: white;
            border-color: #138808;
        }

        .party-card {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .party-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
        }

        .party-logo {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .party-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .agenda-items {
            margin-top: 0.5rem;
        }

        .agenda-item {
            padding: 0.3rem 0;
            border-bottom: 1px dashed #ddd;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .agenda-item:last-child {
            border-bottom: none;
        }

        .agenda-category {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            background: #e3f2fd;
            border-radius: 4px;
            font-size: 0.7rem;
            color: #1e3c72;
        }

        /* Promise Accuracy Section */
        .promise-accuracy {
            margin: 2rem 0;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #ff9933;
        }

        .accuracy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .accuracy-badge {
            background: #ff9933;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .accuracy-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-card {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .stat-completed {
            color: #138808;
        }

        .stat-pending {
            color: #ff9933;
        }

        .stat-broken {
            color: #dc3545;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        .promise-progress {
            margin: 1rem 0;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-completed {
            background: #138808;
        }

        .progress-pending {
            background: #ff9933;
        }

        .progress-broken {
            background: #dc3545;
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
        }

        .promise-details {
            margin-top: 1rem;
        }

        .promise-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .promise-item:last-child {
            border-bottom: none;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-completed {
            background: #138808;
        }

        .status-pending {
            background: #ff9933;
        }

        .status-broken {
            background: #dc3545;
        }

        /* LAYOUT 3: News Focus */
        .layout-news .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .news-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .news-filter-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .news-filter-btn.active {
            background: #138808;
            color: white;
            border-color: #138808;
        }

        .news-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        .news-item:hover {
            background: #f8f9fa;
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-image {
            width: 120px;
            height: 80px;
            border-radius: 6px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .news-content {
            flex: 1;
        }

        .news-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 1rem;
        }

        .news-excerpt {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #888;
        }

        .news-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-good {
            background: #e8f5e9;
            color: #138808;
        }

        .badge-bad {
            background: #ffebee;
            color: #dc3545;
        }

        .badge-neutral {
            background: #e3f2fd;
            color: #1e3c72;
        }

        /* LAYOUT 4: Pending Bills & Concerns */
        .layout-bills .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .bills-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .bill-filter-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .bill-filter-btn.active {
            background: #138808;
            color: white;
            border-color: #138808;
        }

        .bill-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        .bill-item:hover {
            background: #f8f9fa;
        }

        .bill-item:last-child {
            border-bottom: none;
        }

        .bill-image {
            width: 120px;
            height: 80px;
            border-radius: 6px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .bill-content {
            flex: 1;
        }

        .bill-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 1rem;
        }

        .bill-excerpt {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .bill-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #888;
        }

        .bill-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-pending {
            background: #fff3e0;
            color: #ff9800;
        }

        .badge-passed {
            background: #e8f5e9;
            color: #138808;
        }

        .badge-rejected {
            background: #ffebee;
            color: #dc3545;
        }

        .bill-progress {
            margin-top: 0.5rem;
        }

        .bill-progress-bar {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }

        .bill-progress-fill {
            height: 100%;
            border-radius: 3px;
            background: #ff9800;
        }

        /* LAYOUT 5: Group Chat */
        .layout-chat .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            padding: 1rem;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 0.8rem;
            border-radius: 12px;
            position: relative;
        }

        .message.self {
            align-self: flex-end;
            background: #138808;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.other {
            align-self: flex-start;
            background: #e9ecef;
            color: #333;
            border-bottom-left-radius: 4px;
        }

        .message-sender {
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
        }

        .message-text {
            font-size: 0.9rem;
        }

        .message-time {
            font-size: 0.7rem;
            text-align: right;
            margin-top: 0.3rem;
            opacity: 0.8;
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 0 0 8px 8px;
        }

        .chat-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 0.5rem;
        }

        .chat-input button {
            background: #138808;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .chat-topics {
            margin-top: 1rem;
        }

        .topic-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .topic-tag {
            background: #e3f2fd;
            color: #1e3c72;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .topic-tag:hover {
            background: #bbdefb;
        }

        /* Token Reward Notification */
        .token-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .token-reward {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .token-message {
            font-size: 0.9rem;
        }

        .close-notification {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #333;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
            text-align: center;
        }

        /* Map Styling */
        #india-map-reviews, #india-map-agendas, #india-map-news, #india-map-bills, #india-map-chat {
            height: 100%;
            width: 100%;
            border-radius: 6px;
        }

        .constituency-selector {
            margin-top: 1rem;
        }

        .constituency-selector select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
        }

        @media (max-width: 968px) {
            .layout-reviews .main-content,
            .layout-agendas .main-content,
            .layout-news .main-content,
            .layout-bills .main-content,
            .layout-chat .main-content {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 0.5rem;
            }

            .accuracy-stats {
                grid-template-columns: 1fr;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body class="layout-reviews">
    <!-- Token Reward Notification -->
    <div class="token-notification" id="tokenNotification">
        <div>ðŸŽ‰</div>
        <div>
            <div class="token-message">Thanks for your honest review!</div>
            <div class="token-reward">+<span id="tokenAmount">5</span> Civic Tokens</div>
        </div>
        <button class="close-notification" onclick="closeNotification()">Ã—</button>
    </div>

    <!-- Layout Switcher -->
    <div class="layout-switcher">
        <span class="layout-label">View:</span>
        <button class="layout-btn active" data-layout="reviews">Reviews & Opinions</button>
        <button class="layout-btn" data-layout="agendas">Party Agendas & Accuracy</button>
        <button class="layout-btn" data-layout="news">Local Political News</button>
        <button class="layout-btn" data-layout="bills">Pending Bills & Concerns</button>
        <button class="layout-btn" data-layout="chat">Political Reforms Chat</button>
    </div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div>
                        <div class="logo-text">BharatVoteInsight</div>
                        <div class="logo-tagline">Empowering Indian Voters</div>
                    </div>
                </div>
                <div class="user-tokens">
                    <span class="token-icon">ðŸª™</span>
                    <span id="userTokenCount">150</span> Civic Tokens
                </div>
                <nav>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Election Data</a></li>
                        <li><a href="#">Voter Resources</a></li>
                        <li><a href="#">About</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- LAYOUT 1: Reviews Focus -->
    <div class="layout-content active" id="layout-reviews">
        <div class="container">
            <section class="main-content">
                <div class="map-container">
                    <h2>Select Your Constituency</h2>
                    <p>Click on your state to view and write reviews</p>
                    <div id="india-map-reviews"></div>
                    <div class="constituency-selector">
                        <select id="constituency-select-reviews">
                            <option value="">Select a constituency</option>
                        </select>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="location-info">
                        <h3 id="selected-location-reviews">Select a location on the map</h3>
                        <p id="location-details-reviews">Choose your constituency to view local political reviews</p>
                    </div>

                    <div class="review-form">
                        <h3>Write a Review</h3>
                        <textarea id="reviewText-reviews" placeholder="Share your opinion about political performance in your area. What's working well? What needs improvement?" rows="4"></textarea>
                        <button onclick="submitReview('reviews')">Submit Review</button>
                    </div>

                    <div class="reviews-section">
                        <h3>Recent Reviews from Your Constituency</h3>
                        <div id="reviews-container-reviews">
                            <p class="no-data">Select a constituency to see reviews from that area</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- LAYOUT 2: Agendas & Accuracy Focus -->
    <div class="layout-content" id="layout-agendas">
        <div class="container">
            <section class="main-content">
                <div class="map-container">
                    <h2>Select Your Constituency</h2>
                    <p>Click on your state to view party agendas</p>
                    <div id="india-map-agendas"></div>
                    <div class="constituency-selector">
                        <select id="constituency-select-agendas">
                            <option value="">Select a constituency</option>
                        </select>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="location-info">
                        <h3 id="selected-location-agendas">Select a location on the map</h3>
                        <p id="location-details-agendas">Choose your constituency to view political party agendas</p>
                    </div>

                    <div class="party-agendas">
                        <h3>Party Agendas & Manifestos</h3>
                        <div class="agenda-year-selector">
                            <button class="year-btn active" data-year="2024">2024</button>
                            <button class="year-btn" data-year="2019">2019</button>
                            <button class="year-btn" data-year="2014">2014</button>
                        </div>

                        <div id="agendas-container-agendas">
                            <p class="no-data">Select a constituency to view party agendas</p>
                        </div>
                    </div>

                    <div class="promise-accuracy" id="promiseAccuracy-agendas" style="display: none;">
                        <!-- Promise accuracy content will be loaded here -->
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- LAYOUT 3: News Focus -->
    <div class="layout-content" id="layout-news">
        <div class="container">
            <section class="main-content">
                <div class="map-container">
                    <h2>Select Your Constituency</h2>
                    <p>Click on your state to view local political news</p>
                    <div id="india-map-news"></div>
                    <div class="constituency-selector">
                        <select id="constituency-select-news">
                            <option value="">Select a constituency</option>
                        </select>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="location-info">
                        <h3 id="selected-location-news">Select a location on the map</h3>
                        <p id="location-details-news">Choose your constituency to view local political news</p>
                    </div>

                    <div class="news-filters">
                        <button class="news-filter-btn active" data-category="all">All News</button>
                        <button class="news-filter-btn" data-category="good">Positive</button>
                        <button class="news-filter-btn" data-category="bad">Concerns</button>
                        <button class="news-filter-btn" data-category="neutral">Neutral</button>
                    </div>

                    <div id="news-container-news">
                        <p class="no-data">Select a constituency to view local political news</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- LAYOUT 4: Pending Bills & Concerns -->
    <div class="layout-content" id="layout-bills">
        <div class="container">
            <section class="main-content">
                <div class="map-container">
                    <h2>Select Your Constituency</h2>
                    <p>Click on your state to view pending bills</p>
                    <div id="india-map-bills"></div>
                    <div class="constituency-selector">
                        <select id="constituency-select-bills">
                            <option value="">Select a constituency</option>
                        </select>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="location-info">
                        <h3 id="selected-location-bills">Select a location on the map</h3>
                        <p id="location-details-bills">Choose your constituency to view pending bills and government concerns</p>
                    </div>

                    <div class="bills-filters">
                        <button class="bill-filter-btn active" data-status="all">All Bills</button>
                        <button class="bill-filter-btn" data-status="pending">Pending</button>
                        <button class="bill-filter-btn" data-status="passed">Passed</button>
                        <button class="bill-filter-btn" data-status="rejected">Rejected</button>
                    </div>

                    <div id="bills-container-bills">
                        <p class="no-data">Select a constituency to view pending bills</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- LAYOUT 5: Group Chat -->
    <div class="layout-content" id="layout-chat">
        <div class="container">
            <section class="main-content">
                <div class="map-container">
                    <h2>Select Your Constituency</h2>
                    <p>Click on your state to join constituency chat</p>
                    <div id="india-map-chat"></div>
                    <div class="constituency-selector">
                        <select id="constituency-select-chat">
                            <option value="">Select a constituency</option>
                        </select>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="location-info">
                        <h3 id="selected-location-chat">Select a location on the map</h3>
                        <p id="location-details-chat">Choose your constituency to join political reforms discussion</p>
                    </div>

                    <div class="chat-container">
                        <div class="chat-header">
                            <h3>Political Reforms Discussion</h3>
                            <p>Chat with people in your constituency about political reforms</p>
                        </div>

                        <div class="chat-messages" id="chat-messages">
                            <div class="message other">
                                <div class="message-sender">Rahul Sharma</div>
                                <div class="message-text">We need better transparency in local government spending. How can we push for this?</div>
                                <div class="message-time">10:24 AM</div>
                            </div>
                            <div class="message self">
                                <div class="message-sender">You</div>
                                <div class="message-text">I agree! We should start by demanding quarterly expenditure reports from our MLA.</div>
                                <div class="message-time">10:26 AM</div>
                            </div>
                            <div class="message other">
                                <div class="message-sender">Priya Patel</div>
                                <div class="message-text">Has anyone looked into the pending education bill? It could really help our local schools.</div>
                                <div class="message-time">10:28 AM</div>
                            </div>
                        </div>

                        <div class="chat-input">
                            <input type="text" id="chat-input-text" placeholder="Type your message...">
                            <button onclick="sendMessage()">Send</button>
                        </div>

                        <div class="chat-topics">
                            <h4>Discussion Topics</h4>
                            <div class="topic-tags">
                                <span class="topic-tag">Education Reform</span>
                                <span class="topic-tag">Healthcare Access</span>
                                <span class="topic-tag">Infrastructure</span>
                                <span class="topic-tag">Transparency</span>
                                <span class="topic-tag">Women's Safety</span>
                                <span class="topic-tag">Environmental Policy</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>BharatVoteInsight &copy; 2023 - Empowering Indian Voters</p>
            <p>Data sourced from Election Commission of India and public manifests. This is a demonstration platform.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Initialize user token balance
        let userTokens = 150;

        // Layout switching functionality
        document.querySelectorAll('.layout-btn').forEach(button => {
            button.addEventListener('click', function() {
                const layout = this.dataset.layout;
                
                // Update active button
                document.querySelectorAll('.layout-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // Update body class
                document.body.className = `layout-${layout}`;
                
                // Show/hide layout content
                document.querySelectorAll('.layout-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`layout-${layout}`).classList.add('active');
                
                // Initialize map for the active layout if not already initialized
                initializeMap(layout);
            });
        });

        // Token reward notification function
        function showTokenReward(tokensEarned) {
            const notification = document.getElementById('tokenNotification');
            const tokenAmount = document.getElementById('tokenAmount');
            
            tokenAmount.textContent = tokensEarned;
            notification.style.display = 'flex';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        function closeNotification() {
            document.getElementById('tokenNotification').style.display = 'none';
        }

        // Update token display
        function updateTokenDisplay() {
            document.getElementById('userTokenCount').textContent = userTokens;
        }

        // Review submission function
        function submitReview(layout) {
            const reviewText = document.getElementById(`reviewText-${layout}`).value.trim();
            
            if (!reviewText) {
                alert('Please write a review before submitting.');
                return;
            }

            if (reviewText.length < 10) {
                alert('Please write a more detailed review (at least 10 characters).');
                return;
            }

            const baseTokens = 5;
            const lengthBonus = Math.min(Math.floor(reviewText.length / 20), 10);
            const tokensEarned = baseTokens + lengthBonus;

            userTokens += tokensEarned;
            updateTokenDisplay();
            showTokenReward(tokensEarned);
            addUserReview(reviewText, layout);
            document.getElementById(`reviewText-${layout}`).value = '';
        }

        // Function to add user review to the display
        function addUserReview(reviewText, layout) {
            const reviewsContainer = document.getElementById(`reviews-container-${layout}`);
            const noDataMessage = reviewsContainer.querySelector('.no-data');
            
            if (noDataMessage) {
                noDataMessage.remove();
            }

            const reviewElement = document.createElement('div');
            reviewElement.className = 'user-review';
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
            
            reviewElement.innerHTML = `
                <div><strong>Your Review:</strong> ${reviewText}</div>
                <div class="review-meta">
                    <span>- You</span>
                    <span>${timeString} (Just now)</span>
                </div>
            `;
            
            reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
        }

        // Send chat message function
        function sendMessage() {
            const input = document.getElementById('chat-input-text');
            const messageText = input.value.trim();
            
            if (!messageText) return;
            
            const chatMessages = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'message self';
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
            
            messageElement.innerHTML = `
                <div class="message-sender">You</div>
                <div class="message-text">${messageText}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatMessages.appendChild(messageElement);
            input.value = '';
            
            // Auto-scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate a response after a short delay
            setTimeout(() => {
                const responses = [
                    "That's an interesting point. How do you think we can implement that?",
                    "I agree with your perspective. We should organize a community meeting.",
                    "Has anyone contacted our local representative about this issue?",
                    "I've seen similar reforms work well in other constituencies.",
                    "We should gather more data before proposing this to the authorities."
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                const responseElement = document.createElement('div');
                responseElement.className = 'message other';
                
                const responseTime = new Date();
                const responseTimeString = responseTime.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
                
                responseElement.innerHTML = `
                    <div class="message-sender">Community Member</div>
                    <div class="message-text">${randomResponse}</div>
                    <div class="message-time">${responseTimeString}</div>
                `;
                
                chatMessages.appendChild(responseElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 2000);
        }

        // Initialize maps for all layouts
        function initializeMap(layout) {
            const mapId = `india-map-${layout}`;
            if (document.getElementById(mapId)._leaflet_id) return; // Map already initialized

            const map = L.map(mapId).setView([20.5937, 78.9629], 5);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Sample Indian states data with constituencies
            const statesData = {
                "up": { 
                    name: "Uttar Pradesh", 
                    lat: 26.8467, 
                    lng: 80.9462,
                    constituencies: ["Varanasi", "Lucknow", "Kanpur", "Allahabad", "Agra", "Ghaziabad"]
                },
                "mh": { 
                    name: "Maharashtra", 
                    lat: 19.7515, 
                    lng: 75.7139,
                    constituencies: ["Mumbai North", "Mumbai South", "Pune", "Nagpur", "Thane", "Nashik"]
                },
                "dl": { 
                    name: "Delhi", 
                    lat: 28.6139, 
                    lng: 77.2090,
                    constituencies: ["New Delhi", "Chandni Chowk", "East Delhi", "West Delhi", "South Delhi"]
                },
                "ka": { 
                    name: "Karnataka", 
                    lat: 15.3173, 
                    lng: 75.7139,
                    constituencies: ["Bangalore North", "Bangalore South", "Mysore", "Mangalore", "Belgaum"]
                },
                "tn": { 
                    name: "Tamil Nadu", 
                    lat: 11.1271, 
                    lng: 78.6569,
                    constituencies: ["Chennai North", "Chennai South", "Coimbatore", "Madurai", "Trichy"]
                },
                "gj": { 
                    name: "Gujarat", 
                    lat: 22.2587, 
                    lng: 71.1924,
                    constituencies: ["Ahmedabad East", "Ahmedabad West", "Surat", "Vadodara", "Rajkot"]
                },
                "wb": { 
                    name: "West Bengal", 
                    lat: 22.9868, 
                    lng: 87.8550,
                    constituencies: ["Kolkata North", "Kolkata South", "Howrah", "Durgapur", "Siliguri"]
                },
                "rj": { 
                    name: "Rajasthan", 
                    lat: 27.0238, 
                    lng: 74.2179,
                    constituencies: ["Jaipur", "Jodhpur", "Udaipur", "Kota", "Ajmer"]
                }
            };

            // Add markers for each state
            for (const [key, state] of Object.entries(statesData)) {
                const marker = L.marker([state.lat, state.lng]).addTo(map);
                marker.bindPopup(`<b>${state.name}</b><br>Select to choose constituency`);
                marker.on('click', function() {
                    updateLocationInfo(state.name, state.constituencies, layout);
                });
            }
        }

        // Function to update location information
        function updateLocationInfo(stateName, constituencies, layout) {
            document.getElementById(`selected-location-${layout}`).textContent = `${stateName}`;
            document.getElementById(`location-details-${layout}`).textContent = `Showing data for ${stateName}`;
            
            // Update constituency dropdown
            const constituencySelect = document.getElementById(`constituency-select-${layout}`);
            constituencySelect.innerHTML = '<option value="">Select a constituency</option>';
            constituencies.forEach(constituency => {
                const option = document.createElement('option');
                option.value = constituency;
                option.textContent = constituency;
                constituencySelect.appendChild(option);
            });
            
            // Load appropriate content based on layout
            if (layout === 'reviews') {
                loadReviews(stateName, layout);
            } else if (layout === 'agendas') {
                loadPartyAgendas(stateName, layout);
                loadPromiseAccuracy(stateName, layout);
            } else if (layout === 'news') {
                loadNews(stateName, layout);
            } else if (layout === 'bills') {
                loadBills(stateName, layout);
            }
        }

        // Function to load reviews
        function loadReviews(stateName, layout) {
            const container = document.getElementById(`reviews-container-${layout}`);
            container.innerHTML = '';
            
            // Sample reviews for the selected state
            const sampleReviews = [
                { text: `The current government in ${stateName} has done good work on infrastructure but education quality needs improvement.`, user: "Rajesh Kumar", date: "2 days ago" },
                { text: `Healthcare facilities have improved in the last 5 years. Hope the next candidate focuses on job creation in ${stateName}.`, user: "Priya Sharma", date: "1 week ago" },
                { text: `We need better public transport connectivity in ${stateName}. This should be a priority for all parties.`, user: "Amit Patel", date: "2 weeks ago" }
            ];
            
            sampleReviews.forEach(review => {
                const reviewElement = document.createElement('div');
                reviewElement.className = 'user-review';
                reviewElement.innerHTML = `
                    ${review.text}
                    <div class="review-meta">
                        <span>- ${review.user}</span>
                        <span>${review.date}</span>
                    </div>
                `;
                container.appendChild(reviewElement);
            });
        }

        // Function to load party agendas
        function loadPartyAgendas(stateName, layout) {
            const container = document.getElementById(`agendas-container-${layout}`);
            container.innerHTML = `
                <div class="party-card" style="border-left-color: #FF9933">
                    <div class="party-header">
                        <div class="party-logo" style="background: #FF9933">BJP</div>
                        <div class="party-name">Bharatiya Janata Party</div>
                    </div>
                    <div class="agenda-items">
                        <div class="agenda-item">
                            <span class="agenda-category">Development</span>
                            Infrastructure development projects in ${stateName}
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Education</span>
                            Education reforms and digital learning initiatives
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Agriculture</span>
                            Farmer support and crop insurance schemes
                        </div>
                    </div>
                </div>
                <div class="party-card" style="border-left-color: #138808">
                    <div class="party-header">
                        <div class="party-logo" style="background: #138808">INC</div>
                        <div class="party-name">Indian National Congress</div>
                    </div>
                    <div class="agenda-items">
                        <div class="agenda-item">
                            <span class="agenda-category">Social</span>
                            Social welfare schemes for ${stateName} residents
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Employment</span>
                            Job creation initiatives and skill development
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Healthcare</span>
                            Improved healthcare access and facilities
                        </div>
                    </div>
                </div>
                <div class="party-card" style="border-left-color: #0078D7">
                    <div class="party-header">
                        <div class="party-logo" style="background: #0078D7">AAP</div>
                        <div class="party-name">Aam Aadmi Party</div>
                    </div>
                    <div class="agenda-items">
                        <div class="agenda-item">
                            <span class="agenda-category">Education</span>
                            Quality education reforms in ${stateName}
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Healthcare</span>
                            Affordable healthcare access expansion
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-category">Corruption</span>
                            Anti-corruption measures and transparency
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to load promise accuracy
        function loadPromiseAccuracy(stateName, layout) {
            const accuracySection = document.getElementById(`promiseAccuracy-${layout}`);
            accuracySection.style.display = 'block';
            accuracySection.innerHTML = `
                <div class="accuracy-header">
                    <h3>Promise Accuracy Tracker (2019-2024)</h3>
                    <div class="accuracy-badge">72%</div>
                </div>
                <p>Track how many promises were actually fulfilled by the ruling party in ${stateName}</p>
                
                <div class="accuracy-stats">
                    <div class="stat-card">
                        <div class="stat-number stat-completed">18</div>
                        <div class="stat-label">Promises Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number stat-pending">5</div>
                        <div class="stat-label">In Progress</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number stat-broken">2</div>
                        <div class="stat-label">Promises Broken</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">25</div>
                        <div class="stat-label">Total Promises</div>
                    </div>
                </div>

                <div class="promise-progress">
                    <div class="progress-bar">
                        <div class="progress-fill progress-completed" style="width: 72%"></div>
                        <div class="progress-fill progress-pending" style="width: 20%"></div>
                        <div class="progress-fill progress-broken" style="width: 8%"></div>
                    </div>
                    <div class="progress-labels">
                        <span>Completed</span>
                        <span>In Progress</span>
                        <span>Broken</span>
                    </div>
                </div>

                <div class="promise-details">
                    <h4>Key Promises & Status</h4>
                    <div class="promise-item">
                        <div class="status-indicator status-completed"></div>
                        <div style="flex: 1">
                            <strong>Infrastructure Development</strong>
                            <div style="font-size: 0.8rem; color: #666;">Highway projects completed ahead of schedule</div>
                        </div>
                    </div>
                    <div class="promise-item">
                        <div class="status-indicator status-completed"></div>
                        <div style="flex: 1">
                            <strong>Digital Education Initiative</strong>
                            <div style="font-size: 0.8rem; color: #666;">Online learning platform successfully launched</div>
                        </div>
                    </div>
                    <div class="promise-item">
                        <div class="status-indicator status-pending"></div>
                        <div style="flex: 1">
                            <strong>Metro Expansion</strong>
                            <div style="font-size: 0.8rem; color: #666;">Phase 2 construction ongoing, 70% complete</div>
                        </div>
                    </div>
                    <div class="promise-item">
                        <div class="status-indicator status-broken"></div>
                        <div style="flex: 1">
                            <strong>Reduction in Power Tariffs</strong>
                            <div style="font-size: 0.8rem; color: #666;">Unable to implement due to financial constraints</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to load news
        function loadNews(stateName, layout) {
            const container = document.getElementById(`news-container-${layout}`);
            container.innerHTML = '';
            
            // Sample news for the selected state
            const sampleNews = [
                { 
                    title: `New Education Policy Implemented in ${stateName} Schools`, 
                    excerpt: `The state government has successfully implemented the new education policy across 5000 schools, focusing on digital learning and skill development.`,
                    image: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    category: "good",
                    date: "3 hours ago",
                    source: "Times of India"
                },
                { 
                    title: `Minority Community Raises Concerns Over Land Acquisition`, 
                    excerpt: `Residents from minority communities in ${stateName} have expressed concerns about recent land acquisition policies affecting their neighborhoods.`,
                    image: "https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    category: "bad",
                    date: "1 day ago",
                    source: "The Hindu"
                },
                { 
                    title: `Free Healthcare Scheme Launched for Low-Income Families`, 
                    excerpt: `The state government has launched a new healthcare scheme providing free medical treatment to families below poverty line in ${stateName}.`,
                    image: "https://images.unsplash.com/photo-1551076805-e1869033e561?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    category: "good",
                    date: "2 days ago",
                    source: "Indian Express"
                },
                { 
                    title: `Political Rally Draws Thousands in ${stateName} Capital`, 
                    excerpt: `A major political party held a massive rally in the state capital, with party leaders outlining their vision for the upcoming elections.`,
                    image: "https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    category: "neutral",
                    date: "3 days ago",
                    source: "NDTV"
                },
                { 
                    title: `Farmers Protest Agricultural Policies in ${stateName}`, 
                    excerpt: `Farmers' groups have organized protests against recent agricultural policies, demanding better support and fair pricing for their crops.`,
                    image: "https://images.unsplash.com/photo-1581579438747-1dc8d17bbce4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    category: "bad",
                    date: "4 days ago",
                    source: "The Wire"
                }
            ];
            
            sampleNews.forEach(news => {
                const newsElement = document.createElement('div');
                newsElement.className = 'news-item';
                
                let badgeClass = '';
                if (news.category === 'good') badgeClass = 'badge-good';
                else if (news.category === 'bad') badgeClass = 'badge-bad';
                else badgeClass = 'badge-neutral';
                
                newsElement.innerHTML = `
                    <img src="${news.image}" alt="News Image" class="news-image">
                    <div class="news-content">
                        <div class="news-title">${news.title}</div>
                        <div class="news-excerpt">${news.excerpt}</div>
                        <div class="news-meta">
                            <span>${news.source} â€¢ ${news.date}</span>
                            <span class="news-badge ${badgeClass}">${news.category === 'good' ? 'Positive' : news.category === 'bad' ? 'Concern' : 'Neutral'}</span>
                        </div>
                    </div>
                `;
                container.appendChild(newsElement);
            });
        }

        // Function to load bills
        function loadBills(stateName, layout) {
            const container = document.getElementById(`bills-container-${layout}`);
            container.innerHTML = '';
            
            // Sample bills for the selected state
            const sampleBills = [
                { 
                    title: `Education Reform Bill 2023`, 
                    excerpt: `Proposes comprehensive changes to the state education system, including curriculum updates and teacher training programs.`,
                    image: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    status: "pending",
                    date: "Introduced: 15 March 2023",
                    source: "State Legislative Assembly",
                    progress: 60
                },
                { 
                    title: `Healthcare Accessibility Act`, 
                    excerpt: `Aims to provide universal healthcare access to all residents of ${stateName}, with focus on rural areas.`,
                    image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    status: "passed",
                    date: "Passed: 20 June 2023",
                    source: "State Legislative Assembly",
                    progress: 100
                },
                { 
                    title: `Environmental Protection Amendment`, 
                    excerpt: `Seeks to strengthen environmental regulations and increase penalties for pollution violations in ${stateName}.`,
                    image: "https://images.unsplash.com/photo-1569163139394-de44cb2c8cb8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    status: "pending",
                    date: "Under Review",
                    source: "State Legislative Council",
                    progress: 30
                },
                { 
                    title: `Infrastructure Development Fund Bill`, 
                    excerpt: `Proposes creation of a dedicated fund for infrastructure projects across ${stateName}, focusing on transportation and utilities.`,
                    image: "https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    status: "rejected",
                    date: "Rejected: 5 May 2023",
                    source: "State Legislative Assembly",
                    progress: 0
                },
                { 
                    title: `Women's Safety and Empowerment Act`, 
                    excerpt: `Comprehensive legislation aimed at improving women's safety and increasing their participation in workforce and politics.`,
                    image: "https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                    status: "pending",
                    date: "Committee Review",
                    source: "State Legislative Assembly",
                    progress: 45
                }
            ];
            
            sampleBills.forEach(bill => {
                const billElement = document.createElement('div');
                billElement.className = 'bill-item';
                
                let badgeClass = '';
                if (bill.status === 'pending') badgeClass = 'badge-pending';
                else if (bill.status === 'passed') badgeClass = 'badge-passed';
                else badgeClass = 'badge-rejected';
                
                billElement.innerHTML = `
                    <img src="${bill.image}" alt="Bill Image" class="bill-image">
                    <div class="bill-content">
                        <div class="bill-title">${bill.title}</div>
                        <div class="bill-excerpt">${bill.excerpt}</div>
                        <div class="bill-meta">
                            <span>${bill.source} â€¢ ${bill.date}</span>
                            <span class="bill-badge ${badgeClass}">${bill.status.charAt(0).toUpperCase() + bill.status.slice(1)}</span>
                        </div>
                        ${bill.status === 'pending' ? `
                        <div class="bill-progress">
                            <div class="bill-progress-bar">
                                <div class="bill-progress-fill" style="width: ${bill.progress}%"></div>
                            </div>
                            <div style="font-size: 0.8rem; color: #666;">Progress: ${bill.progress}%</div>
                        </div>
                        ` : ''}
                    </div>
                `;
                container.appendChild(billElement);
            });
        }

        // News filter functionality
        document.querySelectorAll('.news-filter-btn').forEach(button => {
            button.addEventListener('click', function() {
                const category = this.dataset.category;
                
                // Update active button
                document.querySelectorAll('.news-filter-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // Filter news (in a real app, this would filter the actual data)
                const newsContainer = document.getElementById('news-container-news');
                const newsItems = newsContainer.querySelectorAll('.news-item');
                
                newsItems.forEach(item => {
                    if (category === 'all') {
                        item.style.display = 'flex';
                    } else {
                        const badge = item.querySelector('.news-badge');
                        if (badge.classList.contains(`badge-${category}`)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    }
                });
            });
        });

        // Bills filter functionality
        document.querySelectorAll('.bill-filter-btn').forEach(button => {
            button.addEventListener('click', function() {
                const status = this.dataset.status;
                
                // Update active button
                document.querySelectorAll('.bill-filter-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // Filter bills (in a real app, this would filter the actual data)
                const billsContainer = document.getElementById('bills-container-bills');
                const billItems = billsContainer.querySelectorAll('.bill-item');
                
                billItems.forEach(item => {
                    if (status === 'all') {
                        item.style.display = 'flex';
                    } else {
                        const badge = item.querySelector('.bill-badge');
                        if (badge.classList.contains(`badge-${status}`)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    }
                });
            });
        });

        // Year selector functionality
        document.querySelectorAll('.year-btn').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.year-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // In a real app, this would reload agendas for the selected year
                const locationTitle = document.getElementById('selected-location-agendas').textContent;
                if (locationTitle !== 'Select a location on the map') {
                    loadPartyAgendas(locationTitle, 'agendas');
                }
            });
        });

        // Chat input enter key functionality
        document.getElementById('chat-input-text').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize the default layout
        initializeMap('reviews');
    </script>
</body>
</html>